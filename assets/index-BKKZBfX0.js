const p={colors:["#f87171","#facc15","#4ade80","#38bdf8","#a78bfa"],particlesCount:195,physics:{minSpeed:6,maxSpeed:10,minSize:5,maxSize:10,baseAirResistance:.98,airResistanceVariation:.015,maxRotationSpeed:6,minUpwardVelocity:8,maxUpwardVelocity:18},animation:{targetFPS:60,canvasClassName:"confetti"}},u=()=>{const{colors:e}=p;return e[Math.floor(Math.random()*e.length)]},w=(e,n)=>e-n*2+Math.random()*n*2,v=e=>{const n=document.getElementById(`confetti-${e}`);if(n)return n;const r=document.createElement("canvas");return r.id=`confetti-${e}`,r.className=p.animation.canvasClassName,document.body.appendChild(r),r},x=e=>{const n=document.getElementById(`confetti-${e}`);n&&document.body.removeChild(n)},S=(e,n,r,g,s)=>{const{particlesCount:i,colors:d,physics:t}=p,l=[];for(let c=0;c<i;c++){const a=w(s,8),f=Math.random()*(t.maxSpeed-t.minSpeed)+t.minSpeed;l.push({x:e+Math.random()*r,y:n+Math.random()*g,velocityX:Math.cos(a)*f,velocityY:Math.sin(a)*f-Math.random()*t.maxUpwardVelocity-t.minUpwardVelocity,color:u(),rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*t.maxRotationSpeed,size:Math.random()*(t.maxSize-t.minSize)+t.minSize,airResistance:t.baseAirResistance+Math.random()*t.airResistanceVariation})}const m=new Map;for(const c of d)m.set(c,[]);for(const c of l){const a=m.get(c.color);a==null||a.push(c)}return m},M=(e,n,r,g)=>{const s=v(e);if(s.getContext){const i=s.getContext("2d");if(!i){console.error("Canvas 2D context not available"),g(e);return}s.width=window.innerWidth,s.height=window.innerHeight;let d=null;const t=n*(p.animation.targetFPS/1e3),l=s.height/t**2,m=c=>{d||(d=c);const a=c-d;if(a>=n){i.clearRect(0,0,s.width,s.height),g(e);return}const f=Math.max(1-a/n,0);i.clearRect(0,0,s.width,s.height);for(const[y,h]of r.entries()){i.fillStyle=y;for(const o of h)o.velocityX*=o.airResistance,o.velocityY=o.velocityY*o.airResistance+l,o.x+=o.velocityX,o.y+=o.velocityY,o.rotation+=o.rotationSpeed,i.save(),i.globalAlpha=Math.max(f,0),i.translate(o.x,o.y),i.rotate(o.rotation*Math.PI/180),i.fillRect(-o.size/2,-o.size/2,o.size,o.size),i.restore()}requestAnimationFrame(m)};requestAnimationFrame(m)}},C=(e,n,r)=>{const d=t=>{const l=new Map;for(const a of p.colors)l.set(a,[]);const m=S(50,window.innerHeight,20,50,120),c=S(window.innerWidth-50,window.innerHeight,20,50,60);for(const a of p.colors){const f=m.get(a),y=c.get(a),h=l.get(a);f&&(h==null||h.push(...f)),y&&(h==null||h.push(...y))}M(t,r,l,x)};if(d(0),e>1){let t=1;const l=setInterval(()=>{t++,t===e&&clearInterval(l),d(t)},n)}};export{C as showConfetti};
